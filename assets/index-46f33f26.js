(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))c(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&c(a)}).observe(document,{childList:!0,subtree:!0});function o(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(t){if(t.ep)return;t.ep=!0;const r=o(t);fetch(t.href,r)}})();const m="acd1a7db8f824fbc9f9bc66185b587f1",p="d19852e69c09421da777af4404682760",f=btoa(`${m}:${p}`),d=function(){return fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{Authorization:`Basic ${f}`,"Content-Type":"application/x-www-form-urlencoded"},body:"grant_type=client_credentials"}).then(e=>e.json())},i=document.querySelector(".form");document.querySelector(".input");document.querySelector(".btn-search");const y=document.querySelector(".mainListEl"),h=document.querySelector(".artistP"),g=document.querySelector(".songP"),b=document.querySelector(".albumP"),S=document.querySelector(".inModalImg"),q=document.querySelector(".releaseP"),E=document.querySelector(".listenA");let l;const L=function(e,n){return fetch(`https://api.spotify.com/v1/search?q=${e}&type=track&market=KR`,{method:"GET",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}}).then(o=>o.json())},M=function(e,n){return fetch(`https://api.spotify.com/v1/tracks/${e}`,{method:"GET",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}}).then(o=>o.json())};i.addEventListener("submit",e=>{e.preventDefault(),l=e.currentTarget.search.value,d().then(n=>{L(l,n.access_token).then(o=>{o.tracks.items.map(c=>{y.insertAdjacentHTML("beforeend",k(c))}),i.reset()})})});const k=function(e){return`
<button data-action="open-modal" id="openModal"><div class="outModal">
  <img class="imgOutModal" id="${e.id}" src="${e.album.images[0].url}" alt="">
  <p class="mainOutModalp ">${e.name}</p>
  <p class="pOutModal">${e.artists[0].name}</p>
  <p class="pOutModal">Album name: ${e.album.name}</p>
</div></button>


`};let u;const v=document.querySelector('[data-action="open-modal"]'),$=document.querySelector(".js-backdrop");document.querySelector(".modal");const O=document.querySelector('[data-action="close-modal"]');function s(e){document.querySelector("#openModal")&&(document.body.classList.toggle("show-modal"),u=e.target.id,d().then(n=>{M(u,n.access_token).then(o=>{h.textContent=o.artists[0].name,g.textContent=o.name,b.textContent=o.album.name,S.src=o.album.images[0].url,q.textContent=o.album.release_date,E.href=o.external_urls.spotify})}))}v.addEventListener("click",s);O.addEventListener("click",s);$.addEventListener("click",e=>{e.currentTarget===e.target&&s()});window.addEventListener("keydown",e=>{e.key==="Escape"&&document.body.classList.contains("show-modal")&&s()});
