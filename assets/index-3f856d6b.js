(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&a(r)}).observe(document,{childList:!0,subtree:!0});function t(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(n){if(n.ep)return;n.ep=!0;const s=t(n);fetch(n.href,s)}})();const b="acd1a7db8f824fbc9f9bc66185b587f1",v="d19852e69c09421da777af4404682760",P=btoa(`${b}:${v}`),m=function(){return fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{Authorization:`Basic ${P}`,"Content-Type":"application/x-www-form-urlencoded"},body:"grant_type=client_credentials"}).then(e=>e.json())};tui.Pagination;const d=document.querySelector(".form");document.querySelector(".input");document.querySelector(".btn-search");const f=document.querySelector(".mainListEl"),k=document.querySelector(".artistP"),q=document.querySelector(".songP"),E=document.querySelector(".albumP"),M=document.querySelector(".inModalImg"),S=document.querySelector(".releaseP"),L=document.querySelector(".listenA");let i;const h=function(e,o){return fetch(`https://api.spotify.com/v1/search?q=${e}&type=track&market=KR`,{method:"GET",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"}}).then(t=>t.json())},T=function(e,o){return fetch(`https://api.spotify.com/v1/tracks/${e}`,{method:"GET",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"}}).then(t=>t.json())};function y(e,o,t){fetch(`https://api.spotify.com/v1/search?q=${e}&type=track&market=KR&limit=20&offset=${t}`,{method:"GET",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"}}).then(a=>a.json()).then(a=>{p(a.tracks.items)})}function $(e){m().then(o=>{c=o.access_token,h(e,c).then(t=>{l=t.tracks.total,p(t.tracks.items),new tui.Pagination("tui-pagination-container",{totalItems:l,itemsPerPage:20,visiblePages:5,page:1,centerAlign:!0,template:{page:'<a href="#" class="custom-page">{{page}}</a>',currentPage:'<strong class="custom-page selected">{{page}}</strong>',moveButton:'<a href="#" class="custom-move {{type}}">{{type}}</a>',disabledMoveButton:'<span class="custom-move disabled {{type}}">{{type}}</span>',moreButton:'<a href="#" class="custom-ellipsis">...</a>'}}).on("afterMove",n=>{const r=(n.page-1)*20;y(i,c,r)})})})}$("newjeans");let l,c;d.addEventListener("submit",e=>{e.preventDefault(),i=e.currentTarget.search.value,m().then(o=>{c=o.access_token,h(i,c).then(t=>{l=t.tracks.total,p(t.tracks.items),new tui.Pagination("tui-pagination-container",{totalItems:l,itemsPerPage:20,visiblePages:5,page:1,centerAlign:!0,template:{page:'<a href="#" class="custom-page">{{page}}</a>',currentPage:'<strong class="custom-page selected">{{page}}</strong>',moveButton:'<a href="#" class="custom-move {{type}}">{{type}}</a>',disabledMoveButton:'<span class="custom-move disabled {{type}}">{{type}}</span>',moreButton:'<a href="#" class="custom-ellipsis">...</a>'}}).on("afterMove",n=>{const r=(n.page-1)*20;y(i,c,r)}),d.reset()})})});function p(e){f.innerHTML="",e.forEach(o=>{f.insertAdjacentHTML("beforeend",A(o))})}const A=function(e){return`
<button data-action="open-modal" id="openModal"><div class="outModal">
  <img class="imgOutModal" id="${e.id}" src="${e.album.images[0].url}" alt="">
  <p class="mainOutModalp ">${e.name}</p>
  <p class="pOutModal">${e.artists[0].name}</p>
  <p class="pOutModal">Album name: ${e.album.name}</p>
</div></button>


`};let g;const B=document.querySelector('[data-action="open-modal"]'),O=document.querySelector(".js-backdrop");document.querySelector(".modal");const j=document.querySelector('[data-action="close-modal"]');function u(e){document.querySelector("#openModal")&&(document.body.classList.toggle("show-modal"),g=e.target.id,m().then(o=>{T(g,o.access_token).then(t=>{k.textContent=t.artists[0].name,q.textContent=t.name,E.textContent=t.album.name,M.src=t.album.images[0].url,S.textContent=t.album.release_date,L.href=t.external_urls.spotify})}))}B.addEventListener("click",u);j.addEventListener("click",u);O.addEventListener("click",e=>{e.currentTarget===e.target&&u()});window.addEventListener("keydown",e=>{e.key==="Escape"&&document.body.classList.contains("show-modal")&&u()});
